<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events - GDS Public School</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: "#1F3A3D",
                        accent: "#F2A900",
                    },
                },
            },
        };
    </script>
</head>

<body class="bg-gray-50">
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-md shadow-lg border-b border-gray-200 z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <div class="bg-accent p-2 rounded-lg mr-3 shadow-md">
                        <i class="fas fa-graduation-cap text-primary text-xl"></i>
                    </div>
                    <span class="text-xl font-bold text-primary">GDS Public School</span>
                </div>
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="hover:text-accent transition-colors font-medium text-gray-700">Home</a>
                    <a href="About.html" class="hover:text-accent transition-colors font-medium text-gray-700">About</a>
                    <a href="Curriculum.html"
                        class="hover:text-accent transition-colors font-medium text-gray-700">Curriculum</a>
                    <a href="Event.html" class="hover:text-accent transition-colors font-medium text-accent">Events</a>
                    <a href="Contact_Us.html"
                        class="hover:text-accent transition-colors font-medium text-gray-700">Contact Us</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="relative bg-cover bg-center bg-no-repeat text-white pt-20"
        style="height: 70vh; background-image: linear-gradient(rgba(31, 58, 61, 0.8), rgba(31, 58, 61, 0.8)), url('https://images.unsplash.com/photo-1523580494863-6f3031224c94?ixlib=rb-4.0.3&auto=format&fit=crop&w=1632&q=80');">
        <div class="flex flex-col justify-center h-full">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-5xl md:text-6xl font-bold mb-6">School Events</h1>
                <p class="text-xl md:text-2xl max-w-4xl mx-auto opacity-95">
                    Join us for exciting educational events, workshops, and community gatherings
                </p>
            </div>
        </div>
    </section>

    <!-- Events Grid -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-primary mb-4">School Events</h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Discover our latest events and register to participate
                </p>
            </div>

            <!-- Filters -->
            <div class="mb-8 space-y-4">
                <!-- Time Filter -->
                <div class="flex justify-center">
                    <div class="bg-gray-100 p-1 rounded-lg">
                        <button onclick="setTimeFilter('upcoming')" id="upcoming-btn"
                            class="px-4 py-2 rounded-lg font-medium transition-colors bg-accent text-primary">
                            Upcoming Events
                        </button>
                        <button onclick="setTimeFilter('past')" id="past-btn"
                            class="px-4 py-2 rounded-lg font-medium transition-colors text-gray-600 hover:text-primary">
                            Past Events
                        </button>
                    </div>
                </div>

                <!-- Category Filter -->
                <div class="flex flex-wrap justify-center gap-2" id="categoryFilters">
                    <!-- Category buttons will be populated by JavaScript -->
                </div>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="eventsGrid">
                <!-- Events will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Registration Modal -->
    <div id="registrationModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 hidden">
        <div class="bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold text-primary">Event Registration</h3>
                    <button onclick="closeRegistrationModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <h4 id="modalEventTitle" class="font-semibold text-primary mb-2"></h4>
                    <div class="text-sm text-gray-600 space-y-1">
                        <div><i class="fas fa-calendar mr-2"></i><span id="modalEventDate"></span></div>
                        <div><i class="fas fa-clock mr-2"></i><span id="modalEventTime"></span></div>
                        <div><i class="fas fa-map-marker-alt mr-2"></i><span id="modalEventLocation"></span></div>
                    </div>
                </div>

                <!-- Success Message -->
                <div id="successMessage"
                    class="hidden bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-6">
                    <div class="flex items-center">
                        <i class="fas fa-check-circle mr-2"></i>
                        <span>Registration submitted successfully! You will receive a confirmation email shortly.</span>
                    </div>
                </div>

                <!-- Error Message -->
                <div id="errorMessage"
                    class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-circle mr-2"></i>
                        <span>Sorry, there was an error submitting your registration. Please try again.</span>
                    </div>
                </div>

                <!-- Loading Message -->
                <div id="loadingMessage"
                    class="hidden bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg mb-6">
                    <div class="flex items-center">
                        <i class="fas fa-spinner fa-spin mr-2"></i>
                        <span>Submitting your registration...</span>
                    </div>
                </div>

                <form id="registrationForm" onsubmit="submitRegistration(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
                        <input type="text" name="fullName" required
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"
                            placeholder="Enter your full name">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
                        <input type="email" name="email" required
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"
                            placeholder="Enter your email address">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number *</label>
                        <input type="tel" name="phone" required
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"
                            placeholder="Enter your phone number">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Relationship to School</label>
                        <select name="relationship"
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent">
                            <option value="parent">Parent</option>
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                            <option value="community">Community Member</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Special Requirements or
                            Notes</label>
                        <textarea name="notes" rows="3"
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none"
                            placeholder="Any special requirements or additional information"></textarea>
                    </div>

                    <div class="flex gap-3 pt-4">
                        <button type="button" onclick="closeRegistrationModal()"
                            class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Cancel
                        </button>
                        <button type="submit" id="submitBtn"
                            class="flex-1 bg-accent text-primary px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors">
                            Register Now
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Google Sheets Web App URLs
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxtfhA9VU1OKgZf_P55sotZXgiksnCb4jUoqLQdsxkXqhAVZZ0hfYO2cl_xiVggyo2o/exec'; // For events data
        const REGISTRATION_SCRIPT_URL = 'YOUR_REGISTRATION_SCRIPT_URL_HERE'; // For event registration

        // Categories matching Google Sheets data
        const categories = [
            { id: 'all', name: 'All Events' },
            { id: 'Seminar', name: 'Seminars' },
            { id: 'Workshop', name: 'Workshops' },
            { id: 'Bootcamp', name: 'Bootcamps' },
            { id: 'Entertainment', name: 'Entertainment' },
            { id: 'Meeting', name: 'Meetings' }
        ];

        // Events data from Google Sheets
        let allEvents = [];
        let currentSelectedEvent = null;
        let selectedCategory = 'all';
        let selectedTimeFilter = 'upcoming';

        // Initialize page
        document.addEventListener('DOMContentLoaded', function () {
            renderCategoryFilters();
            showLoadingState();
            fetchEventsFromGoogleSheets();
        });

        // Fetch events from Google Sheets
        async function fetchEventsFromGoogleSheets() {
            try {
                const response = await fetch(GOOGLE_SCRIPT_URL + '?action=getEvents');
                const eventsData = await response.json();

                if (eventsData && Array.isArray(eventsData)) {
                    allEvents = eventsData.map((event, index) => ({
                        id: event.id || index + 1,
                        title: event.title || 'Untitled Event',
                        date: event.date || new Date().toISOString().split('T')[0],
                        time: event.time || '12:00 PM',
                        location: event.location || 'TBD',
                        category: event.category || 'Seminar',
                        type: event.type || 'Offline',
                        description: event.description || 'No description available.',
                        image: event.image || `https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=400&h=250&fit=crop&seq=${index}`,
                        featured: event.featured === 'Yes' || event.featured === true,
                        coordinator: event.coordinator || '',
                        email: event.email || ''
                    }));
                } else {
                    // Fallback to sample data if no data from sheets
                    allEvents = getSampleEvents();
                }

                renderEvents();
            } catch (error) {
                console.error('Error fetching events from Google Sheets:', error);
                // Fallback to sample data
                allEvents = getSampleEvents();
                renderEvents();
            }
        }

        function renderCategoryFilters() {
            const categoryFilters = document.getElementById('categoryFilters');
            categoryFilters.innerHTML = '';

            categories.forEach(category => {
                const button = document.createElement('button');
                button.onclick = () => setCategory(category.id);
                button.id = `category-${category.id}`;
                const isSelected = selectedCategory === category.id;
                button.className = `px-4 py-2 rounded-full text-sm font-medium transition-colors ${isSelected
                        ? 'bg-accent text-primary'
                        : 'bg-white text-gray-600 hover:bg-gray-100'
                    }`;
                button.textContent = category.name;
                categoryFilters.appendChild(button);
            });
        }

        function setCategory(categoryId) {
            selectedCategory = categoryId;
            renderCategoryFilters();
            renderEvents();
        }

        function setTimeFilter(timeFilter) {
            selectedTimeFilter = timeFilter;

            // Update time filter buttons
            document.getElementById('upcoming-btn').className = timeFilter === 'upcoming'
                ? 'px-4 py-2 rounded-lg font-medium transition-colors bg-accent text-primary'
                : 'px-4 py-2 rounded-lg font-medium transition-colors text-gray-600 hover:text-primary';

            document.getElementById('past-btn').className = timeFilter === 'past'
                ? 'px-4 py-2 rounded-lg font-medium transition-colors bg-accent text-primary'
                : 'px-4 py-2 rounded-lg font-medium transition-colors text-gray-600 hover:text-primary';

            renderEvents();
        }

        function getFilteredEvents() {
            const currentDate = new Date();
            currentDate.setHours(0, 0, 0, 0);

            return allEvents.filter(event => {
                const eventDate = new Date(event.date);
                const isUpcoming = eventDate >= currentDate;
                const timeMatch = selectedTimeFilter === 'upcoming' ? isUpcoming : !isUpcoming;
                const categoryMatch = selectedCategory === 'all' || event.category === selectedCategory;

                return timeMatch && categoryMatch;
            });
        }

        function showLoadingState() {
            const eventsGrid = document.getElementById('eventsGrid');
            eventsGrid.innerHTML = `
                <div class="col-span-full text-center py-12">
                    <i class="fas fa-spinner fa-spin text-4xl text-gray-400 mb-4"></i>
                    <p class="text-gray-600">Loading events...</p>
                </div>
            `;
        }

        function renderEvents() {
            const eventsGrid = document.getElementById('eventsGrid');

            if (allEvents.length === 0) {
                showLoadingState();
                return;
            }

            const filteredEvents = getFilteredEvents();
            eventsGrid.innerHTML = '';

            if (filteredEvents.length === 0) {
                eventsGrid.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fas fa-calendar-times text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-600">No events found for the selected filters.</p>
                    </div>
                `;
                return;
            }

            filteredEvents.forEach(event => {
                const eventCard = document.createElement('div');
                eventCard.className = 'bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow';

                const categoryName = categories.find(c => c.id === event.category)?.name || event.category;

                eventCard.innerHTML = `
                    <img src="${event.image}" alt="${event.title}" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-3">
                            <span class="px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">${categoryName}</span>
                            <span class="px-2 py-1 rounded text-xs font-medium ${event.type === 'Online' ? 'bg-blue-500/10 text-blue-600' : 'bg-green-500/10 text-green-600'}">${event.type}</span>
                        </div>
                        </div>
                        <h3 class="text-xl font-semibold text-primary mb-3">${event.title}</h3>
                        <div class="flex items-center text-gray-600 text-sm mb-2">
                            <i class="fas fa-calendar-alt mr-2"></i>
                            <span>${new Date(event.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</span>
                            <i class="fas fa-clock ml-4 mr-2"></i>
                            <span>${event.time}</span>
                        </div>
                        <div class="flex items-center text-gray-600 text-sm mb-4">
                            <i class="fas fa-map-marker-alt mr-2"></i>
                            <span>${event.location}</span>
                        </div>
                        <p class="text-gray-600 text-sm mb-4">${event.description}</p>
                        ${event.coordinator ? `
                            <div class="text-xs text-gray-500 mb-4">
                                <i class="fas fa-user mr-1"></i>Coordinator: ${event.coordinator}
                            </div>
                        ` : ''}
                        ${selectedTimeFilter === 'upcoming' ? `
                            <button onclick="handleRegister(${event.id})" 
                                class="w-full bg-accent text-primary px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors">
                                Register Now
                            </button>
                        ` : `
                            <div class="text-center py-2 text-gray-500 text-sm">
                                <i class="fas fa-check-circle mr-2"></i>Event Completed
                            </div>
                        `}
                    </div>
                `;

                eventsGrid.appendChild(eventCard);
            });
        }

        function handleRegister(eventId) {
            const event = allEvents.find(e => e.id === eventId);
            if (event) {
                currentSelectedEvent = event;
                showRegistrationModal(event);
            }
        }

        function showRegistrationModal(event) {
            document.getElementById('modalEventTitle').textContent = event.title;
            document.getElementById('modalEventDate').textContent = new Date(event.date).toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('modalEventTime').textContent = event.time;
            document.getElementById('modalEventLocation').textContent = event.location;

            document.getElementById('registrationModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeRegistrationModal() {
            document.getElementById('registrationModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            currentSelectedEvent = null;

            // Hide all messages
            document.getElementById('successMessage').classList.add('hidden');
            document.getElementById('errorMessage').classList.add('hidden');
            document.getElementById('loadingMessage').classList.add('hidden');
        }

        // async function submitRegistration(event) {
        //     event.preventDefault();

        //     const form = document.getElementById('registrationForm');
        //     const submitBtn = document.getElementById('submitBtn');
        //     const successMessage = document.getElementById('successMessage');
        //     const errorMessage = document.getElementById('errorMessage');
        //     const loadingMessage = document.getElementById('loadingMessage');

        //     // Hide all messages
        //     successMessage.classList.add('hidden');
        //     errorMessage.classList.add('hidden');
        //     loadingMessage.classList.remove('hidden');

        //     // Disable submit button
        //     submitBtn.disabled = true;
        //     submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Submitting...';

        //     try {
        //         const formData = new FormData(form);
        //         const data = {
        //             formType: 'event',
        //             timestamp: new Date().toISOString(),
        //             eventTitle: currentSelectedEvent.title,
        //             fullName: formData.get('fullName') || '',
        //             email: formData.get('email') || '',
        //             phone: formData.get('phone') || '',
        //             relationship: formData.get('relationship') || '',
        //             notes: formData.get('notes') || ''
        //         };

        //         console.log('Sending registration data:', data);

        //         const response = await fetch(GOOGLE_SCRIPT_URL, {
        //             method: 'POST',
        //             mode: 'no-cors',
        //             headers: {
        //                 'Content-Type': 'application/json',
        //             },
        //             body: JSON.stringify(data)
        //         });

        //         // Show success message
        //         loadingMessage.classList.add('hidden');
        //         successMessage.classList.remove('hidden');
        //         form.reset();

        //         // Hide success message and close modal after 3 seconds
        //         setTimeout(() => {
        //             closeRegistrationModal();
        //         }, 3000);

        //     } catch (error) {
        //         console.error('Error:', error);
        //         loadingMessage.classList.add('hidden');
        //         errorMessage.classList.remove('hidden');

        //         // Hide error message after 5 seconds
        //         setTimeout(() => {
        //             errorMessage.classList.add('hidden');
        //         }, 5000);
        //     }

        //     // Re-enable submit button
        //     submitBtn.disabled = false;
        //     submitBtn.innerHTML = 'Register Now';
        // }


    </script>

    <!-- <script>

        // Configuration - Replace with your deployed Apps Script URL
        const xajhGOOGLE_SCRIPT_URLS = "https://script.google.com/macros/s/AKfycbxJJLcFGmipWNMxRCoCeUC29KdZ6Coc1gD74bgFzGwceGfIW5hUHsmPBa9YJhRdCTChLw/exec";

        async function submitRegistration(event) {
            event.preventDefault();

            const form = document.getElementById('registrationForm');
            const submitBtn = document.getElementById('submitBtn');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            const loadingMessage = document.getElementById('loadingMessage');

            // Hide all messages
            successMessage.classList.add('hidden');
            errorMessage.classList.add('hidden');
            loadingMessage.classList.remove('hidden');

            // Disable submit button
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Submitting...';

            try {
                const formData = new FormData(form);

                // Prepare data object
                const data = {
                    formType: 'event',
                    timestamp: new Date().toISOString(),
                    eventTitle: currentSelectedEvent ? currentSelectedEvent.title : 'Unknown Event',
                    fullName: formData.get('fullName') || '',
                    email: formData.get('email') || '',
                    phone: formData.get('phone') || '',
                    relationship: formData.get('relationship') || 'parent',
                    notes: formData.get('notes') || ''
                };

                console.log('Sending registration data:', data);

                // Send to Google Apps Script
                const response = await fetch(REGISTRATION_SCRIPT_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                // Check if request was successful
                if (response.ok) {
                    const result = await response.json();

                    if (result.status === 'success') {
                        // Show success message
                        loadingMessage.classList.add('hidden');
                        successMessage.classList.remove('hidden');
                        form.reset();

                        // Hide success message and close modal after 3 seconds
                        setTimeout(() => {
                            closeRegistrationModal();
                            successMessage.classList.add('hidden');
                        }, 3000);
                    } else {
                        throw new Error(result.message || 'Registration failed');
                    }
                } else {
                    throw new Error(`Server error: ${response.status}`);
                }

            } catch (error) {
                console.error('Error submitting registration:', error);

                // Show error message
                loadingMessage.classList.add('hidden');
                errorMessage.classList.remove('hidden');

                // Update error message text if element exists
                const errorText = errorMessage.querySelector('p');
                if (errorText) {
                    errorText.textContent = error.message || 'An error occurred. Please try again.';
                }

                // Hide error message after 5 seconds
                setTimeout(() => {
                    errorMessage.classList.add('hidden');
                }, 5000);
            } finally {
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Register Now';
            }
        }

        // Optional: Add form validation
        function validateForm() {
            const form = document.getElementById('registrationForm');
            const requiredFields = ['fullName', 'email', 'phone'];

            for (let field of requiredFields) {
                const input = form.querySelector(`[name="${field}"]`);
                if (!input.value.trim()) {
                    input.focus();
                    input.classList.add('border-red-500');
                    return false;
                } else {
                    input.classList.remove('border-red-500');
                }
            }

            return true;
        }

        // Add real-time validation
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('registrationForm');
            if (form) {
                // Add validation on form submission
                form.addEventListener('submit', function (e) {
                    if (!validateForm()) {
                        e.preventDefault();
                        return false;
                    }
                });

                // Remove error styling on input
                const inputs = form.querySelectorAll('input[required], select[required]');
                inputs.forEach(input => {
                    input.addEventListener('input', function () {
                        if (this.value.trim()) {
                            this.classList.remove('border-red-500');
                        }
                    });
                });
            }
        });
    </script> -->

    <script>
    // Configuration - Replace with your deployed Apps Script URL
const daoiREGISTRATION_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyCs0U_eHIQ9VUytEPxpwoOhtevh8SXNfYu1Rz1QgKuNkESkBDY5ZVbd3qOEf7uuryxVA/exec';

async function submitRegistration(event) {
    event.preventDefault();

    const form = document.getElementById('registrationForm');
    const submitBtn = document.getElementById('submitBtn');
    const successMessage = document.getElementById('successMessage');
    const errorMessage = document.getElementById('errorMessage');
    const loadingMessage = document.getElementById('loadingMessage');

    // Validate form first
    if (!validateRegistrationForm()) {
        return false;
    }

    // Hide all messages and show loading
    hideAllMessages();
    if (loadingMessage) loadingMessage.classList.remove('hidden');

    // Disable submit button
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Submitting...';

    try {
        const formData = new FormData(form);
        
        // Prepare data object matching your Google Sheet structure
        const data = {
            timestamp: new Date().toISOString(),
            eventTitle: currentSelectedEvent ? currentSelectedEvent.title : 'Unknown Event',
            fullName: formData.get('fullName').trim(),
            email: formData.get('email').trim(),
            phone: formData.get('phone').trim(),
            relationship: formData.get('relationship') || 'parent',
            notes: formData.get('notes') ? formData.get('notes').trim() : ''
        };

        console.log('Sending registration data:', data);

        // Send to Google Apps Script
        const response = await fetch(daoiREGISTRATION_SCRIPT_URL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
            mode: 'cors'
        });

        console.log('Response status:', response.status);

        if (!response.ok) {
            throw new Error(`Server returned ${response.status}: ${response.statusText}`);
        }

        const result = await response.json();
        console.log('Response data:', result);

        if (result.status === 'success') {
            // Show success message
            if (loadingMessage) loadingMessage.classList.add('hidden');
            if (successMessage) {
                successMessage.classList.remove('hidden');
                
                // Update success message text if possible
                const successText = successMessage.querySelector('span');
                if (successText) {
                    successText.textContent = result.message || 'Registration submitted successfully!';
                }
            }
            
            // Reset form
            form.reset();

            // Hide success message and close modal after 3 seconds
            setTimeout(() => {
                if (typeof closeRegistrationModal === 'function') {
                    closeRegistrationModal();
                }
                if (successMessage) successMessage.classList.add('hidden');
            }, 3000);

        } else {
            throw new Error(result.message || 'Registration failed');
        }

    } catch (error) {
        console.error('Error submitting registration:', error);
        
        // Show error message
        if (loadingMessage) loadingMessage.classList.add('hidden');
        if (errorMessage) {
            errorMessage.classList.remove('hidden');
            
            // Update error message text if possible
            const errorText = errorMessage.querySelector('span');
            if (errorText) {
                errorText.textContent = error.message || 'An error occurred. Please try again.';
            }

            // Hide error message after 8 seconds
            setTimeout(() => {
                errorMessage.classList.add('hidden');
            }, 8000);
        }

    } finally {
        // Re-enable submit button
        submitBtn.disabled = false;
        submitBtn.innerHTML = 'Register Now';
    }
}

function validateRegistrationForm() {
    const form = document.getElementById('registrationForm');
    const requiredFields = [
        { name: 'fullName', label: 'Full Name' },
        { name: 'email', label: 'Email Address' },
        { name: 'phone', label: 'Phone Number' }
    ];
    
    let isValid = true;
    
    for (let field of requiredFields) {
        const input = form.querySelector(`[name="${field.name}"]`);
        if (!input) continue;
        
        const value = input.value.trim();
        
        // Remove previous error styling
        input.classList.remove('border-red-500', 'bg-red-50');
        
        if (!value) {
            input.classList.add('border-red-500', 'bg-red-50');
            input.focus();
            alert(`${field.label} is required`);
            isValid = false;
            break;
        }
        
        // Email validation
        if (field.name === 'email' && !isValidEmail(value)) {
            input.classList.add('border-red-500', 'bg-red-50');
            input.focus();
            alert('Please enter a valid email address');
            isValid = false;
            break;
        }
    }
    
    return isValid;
}

function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

function hideAllMessages() {
    const messages = ['successMessage', 'errorMessage', 'loadingMessage'];
    messages.forEach(id => {
        const element = document.getElementById(id);
        if (element) element.classList.add('hidden');
    });
}

// Add form validation on input
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('registrationForm');
    if (form) {
        const inputs = form.querySelectorAll('input[required], select[required]');
        inputs.forEach(input => {
            input.addEventListener('input', function() {
                if (this.value.trim()) {
                    this.classList.remove('border-red-500', 'bg-red-50');
                }
            });
        });
    }
});
    </script>

    <!-- Footer -->
    <footer class="bg-primary text-white">
        <div class="container mx-auto px-6 py-10">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center mb-6">
                        <div class="bg-accent p-2.5 rounded-md mr-4">
                            <i class="fas fa-graduation-cap text-primary" style="font-size: 24px;"></i>
                        </div>
                        <span class="text-xl font-bold">GDS Public School</span>
                    </div>
                    <p class="text-gray-400 leading-relaxed mb-6">Building a brighter future through excellence in
                        education and character development.</p>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-accent mb-6">Quick Links</h3>
                    <ul class="space-y-3">
                        <li><a href="index.html" class="text-gray-400 hover:text-accent transition-colors">Home</a></li>
                        <li><a href="About.html" class="text-gray-400 hover:text-accent transition-colors">About</a>
                        </li>
                        <li><a href="Curriculum.html"
                                class="text-gray-400 hover:text-accent transition-colors">Curriculum</a></li>
                        <li><a href="Event.html" class="text-gray-400 hover:text-accent transition-colors">Events</a>
                        </li>
                        <li><a href="Contact_Us.html"
                                class="text-gray-400 hover:text-accent transition-colors">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-accent mb-6">Contact Info</h3>
                    <ul class="space-y-4 text-gray-400">
                        <li class="flex items-start">
                            <i class="fas fa-map-marker-alt text-accent mr-3 mt-1"></i>
                            <span>123 Education Street,<br>Knowledge City, KC 12345</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone text-accent mr-3"></i>
                            <span>+1 (555) 123-4567</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope text-accent mr-3"></i>
                            <span>info@gdspublicschool.edu</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-accent mb-6">Follow Us</h3>
                    <div class="flex space-x-3">
                        <a href="#" class="bg-accent text-primary p-2.5 rounded-lg hover:bg-opacity-90 transition-all">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="bg-accent text-primary p-2.5 rounded-lg hover:bg-opacity-90 transition-all">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="bg-accent text-primary p-2.5 rounded-lg hover:bg-opacity-90 transition-all">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="mt-12 pt-8 border-t border-gray-700">
                <p class="text-gray-400 text-sm text-center">© 2024 GDS Public School. All rights reserved.</p>
            </div>
        </div>
    </footer>
</body>

</html>